# OSX aliases

## Enable aliases to be sudo’ed
alias sudo='sudo '

## Clear Chromium cache and history
alias chromium_cache_clean='find ~/Library/Application\ Support/Chromium/Default/ -type f -not -path "*/Extensions/*" -not -path "*/Extension Rules/*" -not -path "*/Extension State/*" -ls -delete; find ~/Library/Caches/Chromium/ -type f -ls -delete'

## Recursively remove .DS_Store files
alias cleanupds="sudo find / -type f -name '*.DS_Store' -ls -delete 2>/dev/null"

## Remove all temp files
alias clear_temps='sudo find /tmp "$(/usr/bin/getconf DARWIN_USER_CACHE_DIR)" "$(echo $TMPDIR)" -ls -delete'

## Remove all *sh histories
alias clear_history='rm -f ~/.*sh_history'

## Remove vim junk
alias clear_vim='rm -f ~/.vim_mru_files; rm -f ~/.viminfo'

## Recursively remove all installers, exclude downloads and external drives
alias remove_all_installers="sudo find / -not -path '$HOME/Downloads/*' -not -path '/Volumes/*' -type f \( -name '*.dmg' -o -name '*.pkg' \) -ls -delete 2>/dev/null"

## Full gem cleanup
alias gem_cache_clean="rm -rf /usr/local/Cellar/ruby/2.3.0/lib/ruby/gems/2.3.0/cache/"

## Full brew cleanup
alias brew_full_clean="brew cleanup --force; brew cask cleanup --force; brew prune; find /opt/homebrew-cask/Caskroom -type f \( -name '*.dmg' -o -name '*.pkg' \) -ls -delete 2>/dev/null; find /Library/Caches/Homebrew/ -type f -ls -delete 2>/dev/null"

## Empty the trash on all mounted volumes and the main HDD.
## Also, clear Apple’s System Logs to improve shell startup speed.
## Finally, clear download history from quarantine. https://mths.be/bum
alias emptytrash='sudo find /Volumes/*/.Trashes -ls -delete; sudo find ~/.Trash -ls -delete; sudo find /private/var/log/asl/ -name "*.asl" -ls -delete; sqlite3 ~/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV* "delete from LSQuarantineEvent"'

## Fast wi-fi switch
alias wifi_off='networksetup -setairportpower airport off'
alias wifi_on='networksetup -setairportpower airport on'

## GNU tail
alias tac='tail -r'

## List open ports
alias ports='netstat -anlt | grep LISTEN'

## Show/hide hidden files in Finder
alias show="defaults write com.apple.finder AppleShowAllFiles -bool true && killall Finder"
alias hide="defaults write com.apple.finder AppleShowAllFiles -bool false && killall Finder"

## Hide/show all desktop icons (useful when presenting)
alias hidedesktop="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"
alias showdesktop="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"

## URL-encode strings
alias urlencode='python -c "import sys, urllib as ul; print ul.quote_plus(sys.argv[1]);"'

## Get OS X Software Updates, and update Homebrew, gem, msf, and cleanup installers
alias update='sudo softwareupdate -i -a; brew update; brew upgrade --all; msfupdate; vagrant plugin update vagrant-parallels; brew_full_clean; gem_cache_clean; remove_all_installers'

## ssh
alias goproxyomsk='proxychains4 -q autossh omsk -D 9999'
alias goomsk='proxychains4 -q ssh omsk'

## Prepare to backup
alias prepare_to_backup='revert_all_parallels_machines; chromium_cache_clean; cleanupds; clear_history; clear_vim; remove_all_installers; gem_cache_clean; brew_full_clean; clear_temps; emptytrash'

## Lock the screen (when going AFK)
alias afk="/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend"

## Reload the shell (i.e. invoke as a login shell)
alias reload="exec $SHELL -l"

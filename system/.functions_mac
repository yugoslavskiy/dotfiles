# Mac OS only

## cat with SublimeText
scat () {
	subl -w $1 &
}

## Open man page as PDF
manpdf() {
	man -t "${1}" | open -f -a /Applications/Preview.app/ 
}

## iTerm cosmetics
## Change the color of the tab when using SSH
## reset the color after the connection closes

#tab-color() {
#    echo -ne "\033]6;1;bg;red;brightness;$1\a"
#    echo -ne "\033]6;1;bg;green;brightness;$2\a"
#    echo -ne "\033]6;1;bg;blue;brightness;$3\a"
#}

#tab-reset() {
#    echo -ne "\033]6;1;bg;*;default\a"
#}

#color-ssh() {
#    if [[ -n "$ITERM_SESSION_ID" ]]; then
#        trap "tab-reset" INT EXIT
#        if [[ "$*" =~ "production|ec2-.*compute-1" ]]; then
#            tab-color 255 0 0
#        else
#            tab-color 0 255 0
#        fi
#    fi
#    ssh $*
#}

#compdef _ssh color-ssh=ssh


## SublimeText color folder diff
smerdiff() {
	path1=`realpath $1`
	path2=`realpath $2`
	subl --command "sublimerge_diff {\"left\": \"$path1/\", \"right\": \"$path2/\"}"
}

## My functions for OCR MacOS screenshots
function OCR_ENG() {
	OCR_VAR=$RANDOM
	OCR_VAR_2=`echo $(($OCR_VAR+$RANDOM))`
	OCR_VAR_3=`echo $OCR_VAR_2`.txt
	convert -density 200 -units PixelsPerInch -type Grayscale +compress "$1" "$OCR_VAR"
	tesseract $OCR_VAR $OCR_VAR_2 -l eng
	cat $OCR_VAR_3 | pbcopy
	echo ' '
	echo '---------------------------------------------------------'
	echo ' '
	cat $OCR_VAR_3
	echo ' '
	echo '---------------------------------------------------------'
	rm -f $OCR_VAR $OCR_VAR_3
}

function OCR_RUS() {
	OCR_VAR=$RANDOM
	OCR_VAR_2=`echo $(($OCR_VAR+$RANDOM))`
	OCR_VAR_3=`echo $OCR_VAR_2`.txt
	convert -density 200 -units PixelsPerInch -type Grayscale +compress "$1" "$OCR_VAR"
	tesseract $OCR_VAR $OCR_VAR_2 -l rus
	cat $OCR_VAR_3 | pbcopy
	echo ' '
	echo '---------------------------------------------------------'
	echo ' '
	cat $OCR_VAR_3
	echo ' '
	echo '---------------------------------------------------------'
	rm -f $OCR_VAR $OCR_VAR_3
}
